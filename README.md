[![GoDoc](http://img.shields.io/badge/godoc-reference-5272B4.svg?style=flat-square)](https://godoc.org/github.com/gwuhaolin/lightsocks)

# [Lightsocks](https://github.com/gwuhaolin/lightsocks)
A lightweight network obfuscation proxy based on the SOCKS5 protocol that can be used to replace Shadowsocks.

- Only focus on obfuscation and use the simplest and most efficient obfuscation algorithm to achieve the goal;
- It will not amplify the transmission traffic, the transmission traffic is smaller and faster, and it takes up less resources (memory usage is about 1M, CPU usage is about 0.1%);
- Written in pure Golang, cross-platform, interested in Golang? Please see [Golang Chinese learning materials summary](http://go.wuhaolin.cn/);

Want to know how Lightsocks works? Please read the article: [You can also write Shadowsocks](https://github.com/gwuhaolin/blog/issues/12).

## download
Go to the [releases](https://github.com/gwuhaolin/lightsocks/releases) page to download the latest executable file, making sure to select the correct operating system and bit number (the Mac system kernel is darwin).
After decompression, you will see 2 executable files, namely:

- **lightsocks-local**: used for clients running on local computers, used to bridge local browsers and remote proxy services, and will obfuscate data before transmission;
- **lightsocks-server**: used for clients running on proxy servers, which will restore obfuscated data;


## start up
### Start lightsocks-server
After downloading lightsocks-server on the proxy server, execute the command:
```bash
./lightsocks-server
```
You can start the server. After successful startup, the following log will be output:
```
Service listening address listen:
:12315
Password password:
******
```
If the server's IP is 45.56.76.5, the meaning of the above log is:

- The service listens at `45.56.76.5:12315`, and the listening port 12315 is randomly generated;
- The password used is `******`

> In addition, you can also [quick start through Docker](https://cloud.docker.com/u/gwuhaolin/repository/docker/gwuhaolin/lightsocks).

### Start lightsocks-local
After downloading lightsocks-local on your local computer, execute the command:
```bash
./lightsocks-local
```
You can start the local proxy client and you will see the following log:
```bash
2017/10/11 10:03:16 Save configuration to file /Users/username/.lightsocks.json Successfully
2017/10/11 10:03:16 lightsocks-client:master started successfully, listening at [::]:7448
```
This indicates that a configuration file was generated to `/Users/username/.lightsocks.json`.
In order for the client to use the specified password to connect to the server, parameters need to be passed to the client. To do this, the configuration file needs to be modified as follows:
```json
{
   "remote": "45.56.76.5:12315",
   "password": "******"
}
```
After restarting lightsocks-local, you can use the local SOCK5 service listening at `127.0.0.1:7448` to use it normally.

After all are started successfully, you can refer to [Use with Chrome](https://github.com/gwuhaolin/lightsocks/wiki/%E6%90%AD%E9%85%8D-Chrome-%E4%BD%BF%E7 %94%A8) Configure your Chrome.

#### Self-start

##### macOS
```
$ sudo vim /Library/LaunchDaemons/lightsocks.plist
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
     <key>KeepAlive</key>
     <true/>
     <key>RunAtLoad</key>
     <true/>
     <key>Label</key>
     <string>lightsocks</string>
         <key>ProgramArguments</key>
         <array>
             <string>/usr/local/bin/lightsocks-local</string>
             <string>/Users/macOS-username/.lightsocks.json</string>
     </array>
    <key>StandardOutPath</key>
     <string>/var/log/lightsocks.log</string>
     <key>StandardErrorPath</key>
     <string>/var/log/lightsocks.log</string>
</dict>
</plist>

```
Enable auto-start at boot:
```
sudo launchctl load -w /Library/LaunchDaemons/lightsocks.plist
```
Turn off auto-start at boot:
```
sudo launchctl stop /Library/LaunchDaemons/lightsocks.plist
sudo launchctl unload -w /Library/LaunchDaemons/lightsocks.plist
```
#### Notice:
- The passwords of lightsocks-local and lightsocks-server must be consistent for normal use. The password must not be leaked.
- The password will be automatically generated, do not generate it yourself. The passwords at both ends must be consistent. Generally, the password generated by lightsocks-server is copied to the local configuration file used by lightsocks-local.
- If you want to customize the name of the persisted configuration file, you can start it through `lightsocks-local your-name.json`, and the configuration file will be saved to `~/your-name.json`.
- After startup, the configuration will be saved in the `~/.lightsocks.json` file. Before startup, the configuration will be read from the `~/.lightsocks.json` file. You can modify `~/.lightsocks.json before startup. ` file to apply the configuration you need, the format is as follows:
```json
{
   "remote": "45.56.76.5:7448",
   "password": "******",
   "listen": "127.0.0.1:7448"
}
```

## Other language implementations
- [lightsocks-python](https://github.com/linw1995/lightsocks-python): Python language implementation version;
- [lightsocks-android](https://github.com/XanthusL/LightSocks-Android): Android implementation version;
- [lightsocks-node](https://github.com/chrisyer/lightsocks-nodejs): Node.js implementation version;
- [lightsocks-c](https://github.com/LeeReindeer/lightsocks-c): C language implementation version;
- [lightsocks-cxx](https://github.com/maxlv7/LightSocks-cxx): C++ implementation version;
